Bootstrap: docker
From: nvidia/cuda:12.4.1-cudnn-runtime-ubuntu22.04

%files
    pyproject.toml /tmp/pyproject.toml

%environment
    export LC_ALL=C

%post
    apt-get update && apt-get install -y python3 python3-pip git
    rm -rf /var/lib/apt/lists/*
    
    pip3 install uv
    
    uv pip install --system torch torchvision 
    cd /tmp
    uv pip install --system -r pyproject.toml
